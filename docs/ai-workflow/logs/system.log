# システムログ

---

## 2025-07-31

-   **タスク:** プロジェクト全体のドキュメント精査と再編成
-   **ブランチ:** `docs/organize-markdown`
-   **作業概要:**
    -   `README.md`: 開発サーバーのURLを修正し、重複していた環境構築手順を削除。`technical-guide.md`へのリンクに一本化。
    -   `human-guide.md`: AIがPR作成を提案するステップを明記し、実態とドキュメントの記述を一致させた。
    -   `session-context.md`: 古いタスク情報を削除し、現在のタスク内容に更新。
    -   `setup-log.md`: これまで記録されていなかった重要な意思決定（GitHub Pagesのパス問題対応、ドキュメントルールの策定）を追記。
    -   `technical-guide.md`: ドキュメントの構成を「セットアップ」と「ワークフロー」に大別し、可読性を向上。ログ管理に関する新しいルールを追加。
    -   `index.md`: `docs`ディレクトリの目次として再定義し、各ドキュメントの概要を追記。

---

## 2025-08-02

-   **タスク:** サポート対象環境の定義とドキュメント更新
-   **ブランチ:** `feature/update-supported-environments`
-   **作業概要:**
    -   古いモバイルOS（iOS 9 / Android 7）のサポートが技術的に困難であると判断し、サポート対象外とすることを決定。その理由を`docs/project-info/setup-log.md`に記録。
    -   プロジェクトのサポート対象環境を定義し、`docs/ai-workflow/2-technical-guide.md`に追記。主要ブラウザの最新2バージョン（Chrome, Firefox, Edge, Safari）と、iOS 12以降のSafari、Android 9以降のChromeをサポート対象とした。開発の主軸がGoogle Chromeであることを明記。
    -   `app/games/[slug]/GameClientPage.tsx` および `app/games/[slug]/page.tsx` から未使用の`rulesContent`プロパティを削除し、ビルドエラーを解消。
    -   開発サーバーを起動し、ブラウザでの動作確認を実施。問題がないことを確認。

---

## 2025-08-02

-   **タスク:** Node.jsバージョンの更新
-   **ブランチ:** `chore/update-node-version`
-   **作業概要:**
    -   プロジェクトのNode.jsバージョンを `18.18.0` から `20.18.1` に更新。
    -   `.node-version` および `.github/workflows/deploy.yml` のバージョン指定を修正。
    -   `package-lock.json` を再生成し、依存関係を更新。
    -   `npm run build` と `npm run lint` を実行し、動作に問題がないことを確認。
    -   変更の経緯と内容を `docs/project-info/setup-log.md` に記録。

---

## 2025-08-04

-   **タスク:** ゲームコアロジックの単体テスト導入と品質保証体制の強化
-   **ブランチ:** `feature/unit-testing`
-   **作業概要:**
    -   `vitest` を導入し、三目並べとリバーシのコアロジック (`core.ts`) の単体テストコードを追加。
    -   `husky` と `lint-staged` を使用し、コミット前に変更されたファイルに関連するテストとビルドが自動実行されるよう設定。
    -   GitHub Actions の CI/CD ワークフロー (`deploy.yml`) を更新し、プルリクエスト作成・更新時にテストとビルドが実行されるように設定。
    -   `docs/ai-workflow/2-technical-guide.md` に、テストに関する新しいルールと、ライセンスファイル更新時の厳格な手順を追記。
    -   `public/licenses.txt` に新規導入ライブラリのライセンス情報を追記。
    -   テストコードの可読性向上のため、全てのテストタイトルを日本語に修正。

---

## 2025-08-05

-   **タスク:** リバーシのUI/UX改善
-   **ブランチ:** `feature/reversi-visual-update`
-   **作業概要:**
    -   リバーシのUIを、テキストベースから駒のアイコンを用いた直感的なデザインに変更。
    -   優勢なプレイヤーのスコアを赤色でハイライトする機能を追加。
    -   アニメーション中の操作ガードやリスタート機能を追加し、操作性を向上。
    -   UI/UXの変更に伴い、関連する仕様書 (`spec-action.md`, `spec-display.md`) を更新。
    -   Hydration Errorを修正するため、HTMLのタグ構造を修正。

---

## 2025-08-05

-   **タスク:** リバーシにヒント機能を追加し、UIを改善する。
-   **ブランチ:** `feature/reversi-hint-function`
-   **作業概要:**
    -   トグル動作する「おしえて！」ボタンを配置し、ヒントの表示レベルを切り替え可能に。
    -   ヒントレベルは「ヒントなし」「おけるばしょ」「ぜんぶヒント」の3段階。
    -   「ぜんぶヒント」モードでは、選択したセルのハイライト表示と、ひっくり返る駒のハイライト、ひっくり返らない駒のグレーアウト表示。
    -   モバイルでの操作性を考慮し、「ぜんぶヒント」モードでのタップ操作を改善。
    -   ボタンの見た目を調整し、長押し時のメニュー表示を無効化。
    -   上記変更に伴い、関連する仕様書を更新。

---

## 2025-08-05

-   **タスク:** リバーシのUI調整と機能改善
-   **ブランチ:** `feat/reversi-ui-improvements`
-   **作業概要:**
    -   「はじめから」ボタンと「ヒント」ボタンのサイズを統一。
    -   「はじめから」ボタンを赤色に変更し、確認ポップアップを追加。
    -   「ばしょヒント」の表示色を現在のターンのコマの色に合わせる。
    -   「ばしょ/ぜんぶヒント」の両方で、おける場所のボードの色を調整。