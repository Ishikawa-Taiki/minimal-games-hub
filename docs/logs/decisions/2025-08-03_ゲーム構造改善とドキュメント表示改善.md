**日付:** 2025年8月3日

## 目的
ゲームのViewとコアロジックの分離、仕様書の分割、命名規則の統一、およびドキュメント表示の改善。

## 議論と意思決定の過程

### 1. ゲームのロジックとビューの分離
- **課題:**
既存ゲーム（◯×ゲーム、リバーシ）のコードがロジックとビューで密結合しており、テストや保守が困難。
- **解決策:**
    - 各ゲームのコアロジックを `core.ts`ファイルに分離し、UIに依存しない純粋なロジックを記述。
    - ビューコンポーネント (`index.tsx`) は `core.ts`から提供される状態を描画することに専念。
    - スタイリングは `index.tsx` 内のStyle Object形式で定義し、JSX内でのインラインスタイルを禁止。
- **結果:** ◯×ゲームとリバーシの両方でロジックとビューの分離を完了。

### 2. システム仕様書の分割と自然言語化
- **課題:** `spec.md`がロジックと表示の両方の仕様を混在させており、テストのインプットとして使いにくい。また、実装に依存した記述が含まれる。
- **解決策:**
    - `spec.md` を廃止し、新たに「システム動作仕様 (`spec-action.md`)」と「システム表示仕様 (`spec-display.md`)」の2ファイルに分割。
    - 各仕様書は、特定のプログラミング言語の構文や関数名など、実装に依存する用語を使わず、自然言語で記述することをルール化。
    - `manifest.json` の仕様を更新し、新しい仕様書ファイルへのパスを定義。
- **結果:** ◯×ゲームとリバーシの仕様書を新しいルールに従って分割・記述。

### 3. ゲーム名の命名規則と表示の統一
- **課題:**
ゲーム名の表記に「三目並べ」「Tic-Tac-Toe」「○×ゲーム」といった表記ゆれがあり、UI表示と内部管理で一貫性がない。
- **解決策:**
    - `GameManifest` 型に `displayName` (UI表示名) と `shortDescription`(簡潔な説明) を追加。
    - `manifest.name` は内部的な正式名称（英語推奨）として使用。
    - トップページやrulesページでのゲーム名表示に `displayName` と`shortDescription` を使用するよう修正。
- **結果:** プロジェクト全体でゲーム名の表記と表示が一貫するように修正。

### 4. ドキュメント表示の改善
- **課題:**
以前の試みで仕様書へのリンクが404エラーとなる問題が発生。また、仕様書を個別のリンクで表示するのではなく、rulesページに統合して表示したい。
- **解決策:**
    - `app/games/[slug]/rules/page.tsx` を修正し、`rules.md`、`spec-action.md`、`spec-display.md` の内容を読み込み、単一のページに統合して表示。
    - `GameLayout.tsx` からのリンクは引き続きrulesページのみを指すように維持。
    - 404エラーの原因となっていたルーティングの問題を解消し、元のrulesページ表示機能に戻す。
- **結果:**
rulesページからゲームのルール、動作仕様、表示仕様をまとめて確認できるようになり、404エラーも解消。

### 5. 技術ガイドへのルール反映
- **課題:** 今回の議論で決定した「ロジックとビューの分離」「Style Object形式の採用」「仕様書の分割と自然言語化」「ゲーム名の命名規則」といった重要なルールが技術ガイドに反映されていない。
- **解決策:** `docs/ai-workflow/2-technical-guide.md`を更新し、上記ルールを明確に記述。
- **結果:** プロジェクトの公式な開発標準として、これらのルールが明文化された。

### 6. 残課題のIssue化に関する議論
- **課題:**
本セッションで完了しなかった、または今後のタスクとして残る課題を明確にする。
- **解決策:**
    - ゲームコアロジックのユニットテスト導入
    - ゲームビューコンポーネントのUIテスト導入
    - 各ゲームのUI/UXに関する細かな調整
    上記3点をIssueとして提案。
- **結果:** 人間からの承認を得て、これらの課題をIssueとして管理する方針を決定。