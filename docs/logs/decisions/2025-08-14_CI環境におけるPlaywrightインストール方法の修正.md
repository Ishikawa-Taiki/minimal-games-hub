**日付:** 2025年8月14日

## 目的
CI環境における`npm install`時のビルド失敗を解消し、安定した開発ワークフローを維持する。

## 議論と意思決定の過程

### 課題: CI環境でのビルド失敗
- **背景:** はさみ将棋のルール調整対応のプルリクエストにおいて、CIのE2Eテストが失敗しているとの報告があった。
- **調査:** ログを分析した結果、テスト実行以前の`npm install`ステップでエラーが発生していることが判明した。
- **原因:** `package.json`の`postinstall`スクリプトに含まれる`npx playwright install --with-deps`コマンドが、GitHub Actionsの実行環境で不要な依存関係のインストールを試み、プロセスが失敗していた。

### 参照: 過去の意思決定
この問題は、[2025-08-10_E2Eテスト実行環境整備と開発ワークフロー改善.md](./2025-08-10_E2Eテスト実行環境整備と開発ワークフロー改善.md)で行われた「Playwrightのセットアップ手順の統一」の決定に関連する。
当時は開発環境のセットアップを簡素化するため、`--with-deps`フラグが追加された。しかし、この変更がCI環境では逆効果となることが今回明らかになった。

### 解決策
- **結論:** `package.json`の`postinstall`スクリプトから`--with-deps`フラグを削除する。
- **理由:**
    - CI環境には、Playwrightの実行に必要な依存関係がプリインストールされているため、`--with-deps`は不要である。
    - このフラグを削除することで、`npm install`が安定し、ビルドプロセス全体の信頼性が向上する。
- **実行:** `package.json`を修正し、関連する意思決定の記録として本文書を作成した。
