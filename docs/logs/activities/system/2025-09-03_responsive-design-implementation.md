# レスポンシブデザインアーキテクチャの導入

## 日付

2025-09-03

## 概要

プロジェクト全体のユーザーエクスペリエンスと開発効率を向上させるため、統一されたレスポンシブデザインアーキテクチャを導入しました。この作業により、PCとモバイルデバイスの両方で、各ゲームが最適化されたレイアウトを提供する基盤が整備されました。

## 背景

従来の実装では、各ゲーム画面のレイアウトに一貫性がなく、特にモバイルデバイスでの操作性に課題がありました。また、ゲームごとにUIコンポーネントが個別実装されていたため、保守性や拡張性の面でも問題がありました。これらの課題を解決するため、全ゲーム共通のレスポンシブ対応が計画・実行されました。

## 実装内容

### 1. 新しいアーキテクチャの導入

-   **デュアルレイアウトシステムの採用:**
    -   **PC (幅768px以上):** サイドバー形式のレイアウトで、情報の一覧性を確保。
    -   **モバイル (幅768px未満):** ミニマルレイアウトとフローティングアクションボタン（FAB）、ボトムシートを採用し、ゲーム画面の表示領域を最大化。
-   **`GameController`インターフェースの拡張:** レスポンシブ対応に必要な状態や振る舞いを共通化。
-   **ポリモーフィックなスコア表示:** `getScoreInfo`メソッドを導入し、`GameLayout`コンポーネントを修正することなく、各ゲームが独自のスコア情報を表示できる拡張性の高い設計を実現しました。

### 2. 共通コンポーネントの整備

-   **`GameLayout`:** レスポンシブレイアウトを自動で切り替える中心的なコンポーネントとして再設計されました。
-   **`useResponsive`:** クライアントサイドで現在のレイアウトモード（PC/モバイル）を判定するカスタムフックを導入しました。
-   **`FloatingActionButton` / `BottomSheet`:** モバイルUIの主要な操作要素となるコンポーネントを`app/components/ui`に実装しました。

### 3. 既存ゲームの移行

-   プロジェクトに存在するすべてのゲーム（三目並べ、リバーシ、はさみ将棋、アニマルチェス、神経衰弱、棒取りゲーム）を新しい`GameController`および`GameLayout`アーキテクチャに移行しました。
-   各ゲームに`@testing-library/react`を使用したユニットテストを実装し、品質を確保しました。

## 結果

-   すべてのゲームで、PCとモバイルに最適化された一貫性のあるUI/UXが提供されるようになりました。
-   新しいゲームを追加する際に、レスポンシブ対応が容易に行えるようになりました。
-   コンポーネントの共通化により、プロジェクト全体の保守性が向上しました。

## 関連ドキュメント

-   **[技術ガイド - レスポンシブアーキテクチャ](../rules/technical-guide-responsive-architecture.md)**
-   **[ADR - ポリモーフィックなスコア表示設計の採用](../decisions/2025-09-03_polymorphic-score-display-design.md)**
-   **[技術ガイド - 共通コンポーネント利用ガイド](../rules/technical-guide-common-components.md)**
