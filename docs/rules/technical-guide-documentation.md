# 技術ガイド - ドキュメント (DOCUMENTATION)

本ドキュメントは、プロジェクトにおけるドキュメント作成と管理に関するルールを定義します。

## 1. ゲーム仕様書のアーキテクチャ

各ゲームの仕様は、以下の3つのドキュメントによって階層的に定義されます。これらのドキュメントは、人間とAI開発者の両方がゲームの仕様を正確に理解し、一貫性のある開発を行うための基盤となります。

1.  **`spec-rules.md` (ルール仕様書)** - **最上位**
2.  **`spec-action.md` (システム動作仕様書)** - **中位**
3.  **`spec-display.md` (システム表示仕様書)** - **最下位**

依存関係は `rules` -> `action` -> `display` の順であり、上位の文書は下位の文書に依存してはなりません。

### 1.1. `spec-rules.md`: ゲームの本質的なルール
- **目的:** ゲームの根幹をなす、普遍的なルールのみを記述します。物理的なボードゲームとしても成立するような、本質的なルールを定義します。
- **責務:** ゲームの目的、勝利条件、プレイヤーのアクション、禁止事項など、ゲームプレイそのものに関わるルールを網羅します。
- **禁止事項:** システム、UI、実装に関するいかなる言及も行なってはなりません。（例：「ボタンをクリックする」「スコアが画面に表示される」）

### 1.2. `spec-action.md`: システムとしての振る舞い
- **目的:** `spec-rules.md`で定義されたゲームを、デジタルシステムとして実現するための、目に見えない内部的な動作、条件、状態遷移を定義します。
- **責務:** ゲームの状態管理、初期化、プレイヤーの操作に対する状態遷移、不正な操作への応答などを定義します。
- **禁止事項:** 実装に依存する用語（関数名、変数名など）の使用を禁止します。

### 1.3. `spec-display.md`: ユーザーへの視覚的表現
- **目的:** `spec-action.md`で定義されたシステムの状態やイベントを、ユーザーが直感的に理解できるように、どのように視覚的に表現するかを定義します。
- **責務:** 画面レイアウト、ゲーム状態の視覚的表現、操作へのフィードバック、イベント通知などを定義します。
- **禁止事項:** 新しい機能やルールを登場させてはなりません。すべての表示は`spec-action.md`で定義された状態やイベントに紐づきます。

## 2. ゲーム仕様書の標準フォーマット

各仕様書は、以下に定義された章立てとテンプレートに厳密に従う必要があります。

### 2.1. `spec-rules.md` の構造
```markdown
# [ゲーム名] ルール
## 1. ゲームの目的
## 2. ゲームの準備
## 3. ゲームの進め方
## 4. ゲームの終了と勝敗
```

### 2.2. `spec-action.md` のテンプレート
```markdown
# [ゲーム名] システム動作仕様
## 1. ゲームの状態管理
ゲームが進行する上で、システムが記憶・管理すべき情報の一覧を記述します。
例：盤面の状態、現在の手番、各プレイヤーの得点など。

## 2. ゲームの初期化
ゲーム開始時に、システムがどのような状態になるべきかを記述します。
例：盤面の初期配置、開始プレイヤー、初期スコアなど。

## 3. プレイヤーの操作と状態遷移
プレイヤーのアクションによって、ゲームの状態がどのように変化するかを定義します。
例：プレイヤーがマスを選択した場合、コマを配置し、盤面を更新し、手番を相手に移す。

## 4. 不正な操作への対応
ルール上許可されていない操作をプレイヤーが行おうとした場合の、システムの振る舞いを定義します。
例：すでにコマが置かれているマスを選択した場合、操作を無視し、ゲームの状態は変化しない。
```

### 2.3. `spec-display.md` のテンプレート
```markdown
# [ゲーム名] システム表示仕様
## 1. 基本的な画面構成
ゲーム画面に表示される主要な要素の一覧を記述します。
例：ゲーム盤、スコア表示エリア、手番インジケーターなど。

## 2. ゲーム状態の視覚的表現
ゲームの状態が、画面上でどのように表現されるかを記述します。
例：現在の手番のプレイヤーのスコア表示エリアは、背景色を変えて強調する。

## 3. プレイヤー操作へのフィードバック
プレイヤーの操作に対して、システムがどのような視覚的フィードバックを返すかを記述します。
例：コマがひっくり返る際、回転するアニメーションを表示する。

## 4. ゲームイベントの通知
パス、勝利、敗北など、ゲームの重要なイベントをユーザーにどのように通知するかを記述します。
例：決着した場合、モーダルウィンドウで勝敗結果と「もう一度プレイ」ボタンを提示する。

## 5. ヒント機能の表示仕様
ヒント機能（おしえて！）がONの場合の表示仕様を定義します。
```

## 3. ドキュメントの運用方針

### 3.1. ドキュメントスタイル規約
- **文体:** 原則として「敬体（です・ます調）」を使用します。
- **用語:** プロジェクト内で使用する専門用語は統一します。
- **既存ドキュメントの編集:** 編集する際は、必ず既存の書式と文体を分析し、そのスタイルに厳密に従います。
- **ゲームの名称:** ゲーム名は、`manifest.json`に定義された`displayName`の値と一致させます。

### 3.2. UIテキストのスタイルガイド
- **文体:** ユーザーが目にするUIテキストは、「常体（だ・である調）」や「〜だよ」といった親しみやすい表現を使用します。
- **文字種:** 可能な限り「ひらがな」を使用し、難しい漢字は避けます。

### 3.3. ドキュメントの更新
- **新規ゲームへの強制適用:** 新規ゲームの仕様書は、本ガイドの標準フォーマットに厳密に従う必要があります。
- **既存ゲームへの適用:** 既存ゲームは、機能追加やバグ修正の際に、新しい標準フォーマットに更新することを推奨します。

### 3.4. AIの行動規範
- **不明点の確認:** AIは、仕様書の作成時に不明な情報を勝手に記載せず、人間に対して具体的な質問を投げかけます。
- **仕様の参照:** AIは、実装や修正を開始する前に、必ず対象ゲームの仕様書を読み込み、完全に理解します。
- **整合性の維持:** AIは、ルールを追加・変更する際、既存ルールとの整合性を自己検証し、必要であれば修正案を提案します。
