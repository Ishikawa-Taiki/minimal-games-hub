# プロジェクト概観 (Project Overview)

本ドキュメントは、このリポジトリの全体的な構造と、各ディレクトリやファイルが担う役割についての期待値を定義します。
開発者やAIエージェントがプロジェクトの全体像を素早く理解し、一貫性を保ちながら開発を進めるための基準情報となることを目的としています。

## 本ドキュメントの期待値

- **網羅的な全体像の提供:** 粗い粒度でプロジェクトの構造を視覚的に示し、原則としてトップレベルに存在する全ての主要なファイルとディレクトリについて言及します。
- **判断基準:** 新しいファイルを追加する際や、既存のコードを変更する際に、適切な配置場所を判断するための指針となります。
- **自己言及:** このドキュメント自体も、プロジェクトの構造を定義する情報として `docs/rules/` に配置されることで、ドキュメント管理のルールを自己言及的に示しています。

より詳細な情報が必要な場合は、各ディレクトリ配下にある専門のドキュメントを参照してください。

## ディレクトリ構造（俯瞰レベル）

```
.
├── .devcontainer/  # GitHub Codespaces のための開発環境定義
├── .github/      # CI/CDワークフローなどのGitHub設定
├── .husky/       # Gitフック（pre-commit, pre-pushなど）
├── docs/         # プロジェクト関連ドキュメント
│   ├── logs/     # 意思決定ログやアクティビティログ
│   └── rules/    # プロジェクトのルールや技術ガイド
├── public/       # 静的アセット
│   └── games/    # 各ゲームの公開アセット（manifest.json, 画像など）
├── scripts/      # 開発補助用のスクリプト
├── src/          # アプリケーションのソースコード
│   ├── app/      # Next.js App Router（UI統合とルーティング）
│   ├── core/     # 汎用的なUIコンポーネント、フック、型定義など
│   └── games/    # 各ゲーム固有のロジックとUI
├── tests/        # プロジェクト横断的なE2Eテスト
├── .gitignore    # Gitが追跡しないファイルやディレクトリを指定
├── AGENTS.md     # AIエージェント向けの開発ガイド
├── ANALYSIS_AND_DESIGN.md # システムの分析・設計に関するドキュメント
├── LICENSE       # プロジェクトのライセンス情報
├── README.md     # プロジェクトの概要と基本的なセットアップ手順
├── next.config.ts # Next.jsの設定ファイル
├── package.json  # プロジェクトの依存関係とスクリプト定義
├── package-lock.json # 依存関係のバージョンをロックするファイル
└── tsconfig.json # TypeScriptの設定ファイル
```
*NOTE: `node_modules`, `.next`, `.vscode` のような、環境に依存する、あるいは自動生成されるディレクトリは除外しています。*

## 各ディレクトリ・ファイルの詳細説明

### ルートディレクトリ

- **`.devcontainer/`**: [GitHub Codespaces](https://github.co.jp/features/codespaces) 上での開発環境を定義します。新しい開発者が迅速に環境をセットアップできるようにします。
- **`.github/`**: GitHub Actionsを用いたCI/CDワークフロー定義などを格納します。
- **`.husky/`**: `pre-commit`や`pre-push`などのGitフックを管理します。コミット前にリンターやテストを自動実行し、コード品質を維持します。
- **`docs/`**: プロジェクトに関連する全てのドキュメントを格納します。
    - **`logs/`**: AIエージェントや開発者の意思決定の経緯（`decisions`）や、タスクの実行記録（`activities`）を時系列で保存します。
    - **`rules/`**: コーディング規約、アーキテクチャ方針、テスト戦略など、プロジェクトの普遍的なルールを定義したドキュメントを格納します。
- **`public/`**: 画像、フォント、`manifest.json`など、ビルドプロセスを経ずに直接配信される静的アセットを格納します。
    - **`games/`**: 各ゲームの `manifest.json` や画像アセットなど、公開が必要なファイルをゲームごとに分類して格納します。
- **`scripts/`**: ライセンス情報の自動更新など、開発ワークフローを補助するユーティリティスクリプトを格納します。
- **`tests/`**: プロジェクト全体にまたがる横断的なE2E（エンドツーエンド）テストを格納します。特定のゲームに閉じない、共通的な挙動（例: トップページのナビゲーション）などを検証します。
- **`.gitignore`**: Gitのバージョン管理から除外するファイルやディレクトリ（例: `node_modules`, `.next`）を指定します。
- **`AGENTS.md`**: AIエージェントに対する指示やヒントを記述するファイルです。
- **`ANALYSIS_AND_DESIGN.md`**: システムの分析や設計に関する高レベルな思考プロセスを記録するドキュメントです。
- **`LICENSE`**: プロジェクトのライセンス（この場合はMITライセンス）を記載したファイルです。
- **`README.md`**: プロジェクトの概要、目的、基本的なセットアップ方法などを記述した、開発者が最初に読むべきドキュメントです。
- **`next.config.ts`**: Next.jsの動作をカスタマイズするための設定ファイルです。
- **`package.json`**: プロジェクト名、バージョン、依存パッケージ（dependencies）、開発用スクリプト（scripts）などを定義するファイルです。
- **`package-lock.json`**: `npm install`でインストールされるパッケージの正確なバージョンを記録し、環境間での依存関係の一貫性を保証します。
- **`tsconfig.json`**: TypeScriptコンパイラの設定ファイルです。コンパイル対象のファイルやオプションを指定します。
- **その他の設定ファイル**: `eslint.config.mjs`, `playwright.config.ts`, `vitest.config.mts` など、各種ツールごとの設定ファイルです。

### `src/` ディレクトリ

アプリケーションの全てのソースコードを格納し、以下の3層のレイヤー構造で管理されます。依存関係は常に一方向（`app` → `games` → `core`）でなければなりません。

- **`src/app/` (UI統合・ルーティング層)**
    - **役割**: Next.jsのApp Routerに基づき、アプリケーション全体のエンドポイントとUI統合を担当します。グローバルなレイアウト (`layout.tsx`) や各ゲームページのコンテナ (`/games/[slug]/page.tsx`) を定義し、`games`と`core`の機能を組み合わせて最終的なWebページを構築します。
    - **原則**: `games`層と`core`層に依存します。

- **`src/games/` (ゲーム実装層)**
    - **役割**: 個別のゲーム実装を格納します。各ゲームは自身の名前を持つサブディレクトリ（例: `reversi/`）で管理されます。
    - **構成**: ゲーム固有のUIコンポーネント (`index.tsx`)、UIに依存しないコアロジック (`core.ts`)、状態管理フック (`useReversi.ts`など)、スタイル (`styles.ts`)、仕様書 (`spec-*.md`)、およびE2Eテスト (`e2e/`) が含まれます。
    - **原則**: `core`層にのみ依存します。`app`層には依存しません。

- **`src/core/` (汎用基盤層)**
    - **役割**: プロジェクト全体で再利用可能な、特定のゲームロジックに依存しない基盤部品を格納します。
    - **構成**: 共有UIコンポーネント（`components/`）、共有カスタムフック（`hooks/`）、共有の型定義（`types/`）などが含まれます。
    - **原則**: 他のどのレイヤーにも依存しない、完全に自己完結したモジュールです。
