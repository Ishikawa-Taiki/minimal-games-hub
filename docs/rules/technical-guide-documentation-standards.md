# ドキュメント標準 (DOCUMENTATION STANDARDS)

本ドキュメントは、プロジェクトにおけるドキュメント作成と管理に関するルールを定義します。

## 1. ドキュメント標準フォーマット

各ゲームのドキュメントは、以下の標準フォーマットに厳密に従う必要があります。

### 1.1. `spec-rules.md` (ゲームルール仕様書 - 想定読者: ユーザー)

（変更なし）

### 1.2. システム仕様書の原則

`spec-action.md` と `spec-display.md` は、ゲームのシステム仕様を定義します。これらのドキュメントは、**実装から独立した自然言語で記述される必要があります。**

-   **禁止事項:** 特定のプログラミング言語の構文、関数名、変数名、コンポーネント名、ライブラリ名など、具体的な実装に依存する用語の使用を禁止します。
-   **目的:** 実装の詳細を知らない人間が読んでも、システムの「何（What）」と「どのように（How）」を完全に理解できるように記述します。

### 1.3. `spec-action.md` (システム動作仕様書 - 想定読者: AIと開発者)

ゲームのコアロジック、つまり「目に見えないルール」の振る舞いを定義します。

```markdown
# [ゲーム名] システム動作仕様

## 1. ゲームの状態管理
ゲームが進行する上で、システムが記憶・管理すべき情報の一覧を記述します。
例：
- 盤面の各マスの状態（駒の種類や有無など）
- 現在の手番はどちらのプレイヤーか
- 各プレイヤーの得点
- ゲームの進行状況（プレイ中、決着、パスなど）

## 2. ゲームの初期化
ゲーム開始時に、システムがどのような状態になるべきかを記述します。
例：
- 盤面の初期配置
- 開始プレイヤー
- 初期スコア

## 3. プレイヤーの操作と状態遷移
プレイヤーのアクション（例: マスを選択する）によって、ゲームの状態がどのように変化するかを定義します。
例：
- プレイヤーが特定のマスを選択した場合、システムは以下の処理を行う。
  1. そのマスに駒を置けるか検証する。
  2. 検証が通れば、駒を配置し、盤面を更新する。
  3. 相手の駒がひっくり返る場合は、それも盤面に反映する。
  4. 手番を相手に移す。

## 4. ゲームの進行ルール
時間経過や特定の条件によって自動的に発生する状態変化を定義します。
例：
- プレイヤーが有効な手を打てない場合、自動的にパスとなり、手番が相手に移る。
- 盤面がすべて埋まる、または両者とも有効な手がない場合、ゲームは終了する。

## 5. 不正な操作への対応
ルール上許可されていない操作をプレイヤーが行おうとした場合の、システムの振る舞いを定義します。
例：
- すでに駒が置かれているマスを選択した場合、システムはその操作を無視し、ゲームの状態は変化しない。
```

### 1.4. `spec-display.md` (システム表示仕様書 - 想定読者: AIと開発者)

ゲームの状態が、ユーザーに「どのように見えるか」を定義します。

```markdown
# [ゲーム名] システム表示仕様

## 1. 基本的な画面構成
ゲーム画面に表示される主要な要素の一覧を記述します。
例：
- ゲーム盤
- スコア表示エリア
- 現在の手番を示すインジケーター
- メッセージ表示エリア

## 2. ゲーム状態の視覚的表現
ゲームの状態（`spec-action.md`で定義）が、画面上でどのように表現されるかを記述します。
例：
- 盤面のマスは、正方形のグリッドとして表示する。
- 各プレイヤーの駒は、それぞれ黒と白の円形で表現する。
- 現在の手番のプレイヤーに対応するスコア表示エリアは、背景色を変えて強調表示する。

## 3. プレイヤー操作へのフィードバック
プレイヤーの操作に対して、システムがどのような視覚的フィードバックを返すかを記述します。
例：
- プレイヤーが駒を置けるマスには、次に獲得できる駒の数を半透明の数字で表示する。
- 駒がひっくり返る際、回転するアニメーションを表示する。

## 4. ゲームイベントの通知
パス、勝利、敗北、引き分けなど、ゲームの重要なイベントが発生した際に、それをユーザーにどのように通知するかを記述します。
例：
- パスが発生した場合、「（プレイヤー名）はパスしました」というメッセージを画面に表示する。
- ゲームが決着した場合、画面全体を覆うモーダルウィンドウを表示し、勝敗結果と「もう一度プレイ」ボタンを提示する。
```

## 2. ドキュメント更新の運用方針

### 2.1. 新規ゲームへの強制適用

今後作成するすべての新しいゲームの `spec-rules.md`、`spec-action.md`、`spec-display.md` は、上記の標準フォーマットに厳密に従うことを必須とします。

### 2.2. 既存ゲームへの適用

既存のゲームについては、以下のいずれかのタイミングで、新しい標準フォーマットに更新することを推奨します。

-   **機能追加やバグ修正など、そのゲームに何らかの変更を加える際。** その変更に合わせてドキュメントも更新し、標準フォーマットに合わせます。
-   **ドキュメントの一貫性が特に重要になった場合。** 例えば、新しいAIエージェントを開発する際に、全ゲームの仕様書が統一されている必要がある、といったケース。この場合は、別途「ドキュメントフォーマット統一」のようなタスクを立てて対応します。

### 2.3. ライセンス表記の更新

ライセンス表記ファイル (`public/licenses.txt`) は、プロジェクトの依存関係から自動生成されます。**このファイルは手動で編集してはなりません。**

依存関係（`package.json`の`dependencies`）に変更があった場合は、必ず以下の手順に従ってファイルを再生成してください。

1.  **`license-checker`のインストール（初回のみ）:**
    もし開発環境に `license-checker` がインストールされていない場合は、以下のコマンドでインストールします。
    ```bash
    npm install license-checker --save-dev
    ```

2.  **ライセンスファイルの生成:**
    プロジェクトのルートディレクトリで以下のコマンドを実行すると、`public/licenses.txt` が最新の状態に更新されます。
    ```bash
    npm run license-update
    ```

3.  **互換性の確認:**
    新しいライブラリを追加した場合は、そのライセンスがプロジェクトのライセンス（MIT License）と互換性があるかを確認してください。

## 3. AIの行動規範 (ドキュメント作成時)

ゲーム作成時、AIは `spec-rules.md`、`spec-action.md`、`spec-display.md` の内容を埋めるために、人間に対して具体的な質問を投げかけ、不明な情報を勝手に記載してはなりません。

## 4. AIの質問に関する行動規範

AIは、人間への質問を生成する際、以下の原則を遵守しなければなりません。

-   **文脈の読み取り:** 提示された情報や過去の対話履歴から読み取れる内容は、最大限に推測し、質問に含めないように努めます。
-   **質問の簡素化:** 冗長な質問や、人間が容易に判断できる内容の質問は避けます。
-   **不明点の明確化:** 文脈から判断できない、または複数の解釈が可能な不明点については、具体的な選択肢を提示するなどして、明確な回答を促す質問を行います。
-   **勝手な判断の禁止:** 不明な情報をAIが勝手に判断して作業を進めることは、いかなる場合も禁止します。必ず人間への確認を優先します。

## 6. ルールと仕様の参照

-   **ゲーム仕様:** ゲームの実装や修正を開始する前に、AIは必ず対象ゲームのディレクトリ（`games/[slug]/`）に定義された仕様を最初に読み込み、完全に理解しなければなりません。
-   **新規ゲーム開発:** 新しいゲームを開発する際は、まずルールとシステム仕様に関するドキュメントを作成し、人間の承認を得てから実装を開始します。

## 7. ルールの整合性維持

-   AIは、新しいルールを追加・変更する際、既存ルールとの整合性をチェックリストに基づき自己検証し、必要であれば統合・修正案を同時に提案しなければなりません。

## 8. AIの初期行動

人間から新しいタスクの指示を受けた際、AIは具体的な作業に入る前に、必ず関連するワークフロー（特にGitワークフローとドキュメント更新責務）を確認し、その旨を宣言します。

## 9. ドキュメントスタイル規約

本プロジェクトのすべてのドキュメントは、以下のスタイル規約を遵守すること。

-   **文体:** 原則として「敬体（です・ます調）」を使用する。
-   **用語:** プロジェクト内で使用する専門用語は統一し、一貫性を持たせる。
-   **既存ドキュメントの編集:** ドキュメントを編集する際、AIは**必ず**既存の書式（見出しレベル、リスト形式、強調表現など）と文体を分析し、そのスタイルに厳密に従わなければならない。新しいセクションを追加する場合も、そのドキュメントの既存の構造に倣うこと。

## 10. UIテキストのスタイルガイド

ゲーム画面など、ユーザー（特に子供）が直接目にするUIのテキストは、以下のスタイルを推奨する。

-   **文体**: 原則として「常体（だ・である調）」または、より口語的な「〜だよ」「〜かな？」といった親しみやすい表現を使用する。
-   **文字種**: 小学校低学年のユーザーでも理解できるよう、可能な限り「ひらがな」を使用する。ただし、ゲームタイトルや一般的に認知されているカタカナ語（例：リセット、ルール）については、カタカナの使用を許可する。
