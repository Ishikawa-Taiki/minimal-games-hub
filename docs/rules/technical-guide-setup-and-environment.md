# セットアップと環境 (SETUP AND ENVIRONMENT)

本ドキュメントは、プロジェクトのセットアップと開発環境に関する技術情報を定義します。

## 1. 環境構築

### 1.1. Node.jsバージョン管理
本プロジェクトでは、Node.jsのバージョン管理に`nodenv`を使用しています。`.node-version`ファイルに指定されたバージョンを使用してください。

```bash
# プロジェクトで使用するNode.jsバージョンをインストール
nodenv install

# プロジェクトディレクトリでバージョンを有効化
nodenv local
```

### 1.2. 依存関係のインストール
プロジェクトのルートディレクトリで、以下のコマンドを実行して依存関係をインストールします。

```bash
npm install
```

## 2. 開発サイクル

### 2.1. 開発サーバーの起動
以下のコマンドを実行すると、`http://localhost:3000` で開発サーバーが起動します。

```bash
npm run dev
```

### 2.2. ポートの解放
開発サーバーやテストの実行中にポートが占有され、新しいプロセスが起動できない場合があります。特に `http://localhost:3000` のようなポートが使用中の場合、以下の手順でプロセスを特定し、解放することができます。

1.  **ポートを使用しているプロセスを特定する:**
    ```bash
    lsof -i :<ポート番号>
    ```
    例: `lsof -i :3000`

2.  **プロセスを終了させる:**
    上記コマンドの出力結果から `PID` (プロセスID) を特定し、以下のコマンドでプロセスを終了させます。
    ```bash
    kill -9 <PID>
    ```
    例: `kill -9 12345` (PIDが12345の場合)

**ラップしたコマンドの検討:**
将来的に、これらの手順を自動化する `npm` スクリプトやシェルスクリプトを用意することも検討します。
例: `npm run kill-port 3000`
```json
// package.json (例)
{
  "scripts": {
    "kill-port": "lsof -t -i :$1 | xargs kill -9"
  }
}
```
ただし、`xargs kill -9` は慎重に使用する必要があります。

## 3. 技術スタック
-   **フレームワーク:** Next.js
-   **言語:** TypeScript
-   **スタイリング:** オブジェクトベースのCSS-in-JSアプローチを採用しています。詳細は `docs/rules/technical-guide-application-architecture.md` のスタイリングセクションを参照してください。
-   **Node.jsバージョン管理:** `nodenv` (`.node-version` ファイルを参照)
-   **リンティング & フォーマット:** `eslint.config.mjs` に定義されたルールに準拠します。

## 4. サポート対象環境

本プロジェクトは、以下の環境での動作をサポート対象とします。
特に、**開発および主要な動作確認はGoogle Chromeの最新バージョンで行われます。**

### 4.1. ブラウザ

*   **デスクトップブラウザ:**
    *   Google Chrome: 最新2バージョン
    *   Mozilla Firefox: 最新2バージョン
    *   Microsoft Edge: 最新2バージョン
    *   Apple Safari: 最新2バージョン
*   **モバイルブラウザ:**
    *   iOS 12以降に搭載されるSafari
    *   Android 9以降に搭載されるChrome

### 4.2. オペレーティングシステム (参考)

上記ブラウザが動作する以下のOSバージョンを想定しています。

*   **iOS:** 12.0 以降
*   **Android:** 9.0 以降
*   **Windows:** Windows 10 以降
*   **macOS:** macOS Mojave (10.14) 以降