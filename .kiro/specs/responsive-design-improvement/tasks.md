# 実装計画

- [ ] 1. 基盤整備：厳密な型定義システムの構築
  - 拡張可能な共通型定義（BaseGameState、GameController）を`types/game.ts`に実装
  - 厳密なレスポンシブ型（ResponsiveState、ControlPanelState）を和構造・積構造で設計
  - ヒント機能の実態に基づいた型定義（HintState、HintOverlayData）を実装
  - _要件: 3.1, 3.3, 3.4, 3.5_

- [ ] 2. レスポンシブ検出システムの実装
  - ブレークポイント（768px）を基準とした`useResponsive`フックを実装
  - 型安全なヘルパー関数（isMobile、isDesktop）を実装
  - SSR対応とブラウザAPI利用不可時のフォールバック処理を実装
  - _要件: 4.1, 4.2, 4.3, 6.1, 6.5_

- [ ] 3. 共通UIコンポーネントライブラリの構築
  - 統一されたButtonコンポーネント（variant、size、disabled状態）を実装
  - 統一されたModalコンポーネント（サイズ、アクセシビリティ対応）を実装
  - ゲーム内ヒント表示用HintOverlayコンポーネントを実装
  - 一貫性のあるデザインシステム（色、フォント、間隔）を`app/styles/`に構築
  - _要件: 5.1, 5.2, 5.3, 6.2, 6.3_

- [ ] 4. PCレイアウト：サイドバーシステムの実装
  - 左サイドバー用ControlPanelコンポーネントを実装
  - 現在の状態、スコア、ルールボタン、リセットボタンを含むサイドバーレイアウトを実装
  - メインエリアでのゲームボード表示領域を最適化
  - _要件: 1.1, 1.2, 1.3, 1.4_

- [ ] 5. モバイルレイアウト：ミニマルUI + FABシステムの実装
  - スリムヘッダー（ゲームタイトル + 現在の状態のみ）を実装
  - フローティングアクションボタン（FAB）コンポーネントを実装
  - ボトムシート/モーダルコンポーネント（スライドアップアニメーション付き）を実装
  - FABタップ時のコントロールパネル表示機能を実装
  - _要件: 2.1, 2.2, 2.3, 2.4, 2.5_

- [ ] 6. 改良されたGameLayoutコンポーネントの実装
  - レスポンシブ対応のGameLayoutコンポーネントを実装
  - GameControllerインターフェースを受け取り、共通状態を描画する機能を実装
  - デスクトップ/モバイルレイアウトの自動切り替え機能を実装
  - ゲーム固有のstatusComponentを受け取るオプション機能を実装
  - _要件: 3.3, 3.4, 4.1, 4.5_

- [ ] 7. 既存ゲーム（リバーシ）のGameController対応
  - リバーシゲームのuseReversiフックをGameControllerインターフェースに準拠させる
  - ヒント機能（placeable、full）を新しいHintStateに対応させる
  - 履歴機能（undo/redo）をHistoryGameControllerに対応させる
  - 新しいGameLayoutコンポーネントを適用
  - _要件: 3.1, 3.2, 3.5_

- [ ] 8. 既存ゲーム（はさみ将棋）のGameController対応
  - はさみ将棋ゲームのuseHasamiShogiフックをGameControllerインターフェースに準拠させる
  - ヒント機能（valid moves、captures、threats）を新しいHintStateに対応させる
  - 新しいGameLayoutコンポーネントを適用
  - _要件: 3.1, 3.2, 3.5_

- [ ] 9. 既存ゲーム（アニマルチェス）のGameController対応
  - アニマルチェスゲームのuseAnimalChessフックをGameControllerインターフェースに準拠させる
  - ヒント機能（valid moves、capturable、threatened、selectable）を新しいHintStateに対応させる
  - 新しいGameLayoutコンポーネントを適用
  - _要件: 3.1, 3.2, 3.5_

- [ ] 10. 既存ゲーム（三目並べ）のGameController対応
  - 三目並べゲームのuseTicTacToeフックをGameControllerインターフェースに準拠させる
  - ヒント機能（reaching lines、both reaching）を新しいHintStateに対応させる
  - 新しいGameLayoutコンポーネントを適用
  - _要件: 3.1, 3.2, 3.5_

- [ ] 11. 既存ゲーム（神経衰弱）のGameController対応
  - 神経衰弱ゲームのuseConcentrationフックをGameControllerインターフェースに準拠させる
  - ヒント機能（revealed cards、hinted cards）を新しいHintStateに対応させる
  - 新しいGameLayoutコンポーネントを適用
  - _要件: 3.1, 3.2, 3.5_

- [ ] 12. 既存ゲーム（棒取りゲーム）のGameController対応
  - 棒取りゲームのuseStickTakingフックをGameControllerインターフェースに準拠させる
  - 新しいGameLayoutコンポーネントを適用
  - _要件: 3.1, 3.2, 3.5_

- [ ] 13. ホームページのレスポンシブ対応
  - ホームページのゲームグリッドをレスポンシブ対応（PC: 2-3列、モバイル: 1列）
  - 統一されたUIコンポーネントを適用
  - タッチフレンドリーなボタンサイズとスペーシングを実装
  - _要件: 1.5, 2.6, 5.1, 5.2_

- [ ] 14. アクセシビリティとタッチ対応の実装
  - すべてのインタラクティブ要素にタッチフレンドリーなサイズ（最小44px）を適用
  - 視覚的フィードバック（ホバー、アクティブ状態）を実装
  - キーボードナビゲーション対応を実装
  - スクリーンリーダー対応（aria-label、role属性）を実装
  - _要件: 5.1, 5.3, 5.4_

- [ ] 15. パフォーマンス最適化
  - レスポンシブ計算のメモ化（useMemo、useCallback）を実装
  - CSS-in-JSスタイルオブジェクトのメモ化を実装
  - レイアウト切り替え時の不要な再レンダリング防止を実装
  - ボトムシートアニメーションのパフォーマンス最適化を実装
  - _要件: 4.5, 5.5_

- [ ] 16. ユニットテストの実装
  - レスポンシブフック（useResponsive）のテストを実装
  - GameControllerインターフェースの動作テストを実装
  - 共通UIコンポーネントのテストを実装
  - ヒント機能の状態管理テストを実装
  - _要件: 3.5, 6.4, 6.5_

- [ ] 17. インテグレーションテストの実装
  - レイアウト切り替え（ブラウザリサイズ）のテストを実装
  - ゲーム状態保持（レイアウト変更時）のテストを実装
  - FAB → ボトムシート → 操作の一連の流れのテストを実装
  - _要件: 4.1, 4.2, 4.5_

- [ ] 18. E2Eテストの実装
  - PC/モバイル表示切り替えのテストを実装
  - 各レイアウトでのゲーム操作のテストを実装
  - ページ遷移時のレイアウト保持のテストを実装
  - _要件: 5.4, 6.1, 6.2_

- [ ] 19. ブラウザ互換性とアクセシビリティ監査
  - 主要ブラウザ（Chrome、Firefox、Safari、Edge）での動作確認を実施
  - モバイルブラウザ（iOS Safari、Android Chrome）での動作確認を実施
  - アクセシビリティ監査（WCAG 2.1 AA準拠）を実施
  - _要件: 5.2, 5.4, 6.5_

- [ ] 20. ドキュメント更新と最終調整
  - アーキテクチャドキュメントの更新（新しい共通システムの説明）
  - 各ゲームのspec-display.mdの更新（レスポンシブ対応の記載）
  - 開発者向けガイドの更新（新しいGameControllerの使用方法）
  - 最終的なスタイル調整とポリッシュ
  - _要件: 3.4, 6.3_