# はさみ将棋 アクション仕様書

## 1. 概要
このドキュメントは、はさみ将棋ゲームにおけるユーザーのアクションと、それに対するシステムの振る舞いを定義します。

## 2. アクション一覧

### 2.1. 駒の選択
-   **トリガー:** ユーザーが盤上の自分の駒をクリックする。
-   **システム動作:**
    -   クリックされた駒を「選択状態」としてハイライトする。
    -   ヒントがONの場合、選択された駒が移動可能なすべてのマスについて、安全性（安全/危険）とキャプチャ情報を計算し、ハイライト表示する。
    -   既に他の駒が選択されていた場合は、新しい駒に選択を切り替える。

### 2.2. 駒の移動
-   **トリガー:** 駒が選択されている状態で、ユーザーが移動可能なマスをクリックする。
-   **システム動作:**
    -   選択されていた駒を、クリックされたマスに移動させる。
    -   駒の選択状態を解除し、ヒントのハイライトを非表示にする。
    -   移動した駒が相手の駒を挟み込む形を完成させた場合、その挟まれた相手の駒を盤上から取り除く。自ら挟まれる位置に移動した駒は、その手では取られない。
    -   相手のターンに切り替える。

### 2.3. ヒントON/OFF
-   **トリガー:** ユーザーが「ヒント」ボタンをクリックする。
-   **システム動作:**
    -   ヒントの表示状態を切り替える。
    -   ヒントがONになった場合、現在選択されている駒があれば、移動可能マスのハイライトを更新する。
    -   ヒントがOFFになった場合、すべてのヒントハイライトを非表示にする。

### 2.4. マスのホバー
-   **トリガー:** ヒントONの状態で、ユーザーが移動可能なマス（赤色または緑色）にマウスカーソルを乗せる。
-   **システム動作:**
    -   その移動によってキャプチャできる相手の駒のマスを水色でハイライトする。
    -   カーソルがマスから離れたら、ハイライトを元に戻す。

### 2.5. ゲームのリセット
-   **トリガー:** ユーザーが「はじめから」ボタンをクリックする。
-   **システム動作:**
    -   盤面を初期状態に戻す。
    -   すべてのゲーム統計（持ち駒など）をリセットする。
