# 動作仕様書: カードあわせ

本ドキュメントは「カードあわせ」ゲームの動作仕様を定義します。

## 1. ゲームの初期化

-   **トリガー:** ページが読み込まれた時、または「ゲームをリセット」ボタンがクリックされた時。
-   **アクション:**
    1.  54枚のカード（4スートx13ランク+ジョーカー2枚）からなるデッキを生成します。
    2.  デッキをランダムにシャッフルします。
    3.  全てのカードを裏向きの状態でゲームボードに配置します。
    4.  プレイヤー1とプレイヤー2のスコアを0に初期化します。
    5.  現在のアクティブプレイヤーをプレイヤー1に設定します。

## 2. カードのクリック

-   **トリガー:** プレイヤーが裏向きのカードを1枚クリックした時。
-   **前提条件:**
    -   クリックされたカードがすでにマッチ済み、または表向きでないこと。
    -   現在、2枚のカードが表向きになって評価待ちの状態で無いこと。
-   **アクション:**
    1.  クリックされたカードを表向きにします。
    2.  表向きになっているカードの枚数を記録します。

### 2.1. 2枚目のカードをめくった時の動作

-   **トリガー:** プレイヤーが2枚目のカードをクリックし、表向きのカードが合計2枚になった時。
-   **アクション（マッチした場合）:**
    1.  2枚のカードの絵柄が一致した場合、現在のプレイヤーのスコアを1増やします。
    2.  2枚のカードを「マッチ済み」状態に変更します。
    3.  プレイヤーのターンは交代せず、同じプレイヤーが続けてカードをめくることができます。
    4.  全てのカードがマッチ済みになった場合、ゲームを終了し、勝敗を決定します。
-   **アクション（マッチしなかった場合）:**
    1.  2枚のカードの絵柄が一致しなかった場合、カードを1.2秒間だけ表向きで表示します。
    2.  1.2秒後、2枚のカードを再び裏向きに戻します。
    3.  次のプレイヤーにターンを交代します。

## 3. リセットボタンのクリック

-   **トリガー:** 「ゲームをリセット」ボタンがクリックされた時。
-   **アクション:**
    -   ゲームの状態を初期状態に戻します（上記「1. ゲームの初期化」を参照）。
