# ○×ゲーム システム動作仕様

## 1. ゲームの状態管理
システムは、以下の情報を常に記憶します。
- 3x3の盤面の各マスが「プレイヤーXの駒」「プレイヤーOの駒」「空」のいずれであるか。
- 現在の手番はプレイヤーXかプレイヤーOか。
- ゲームの勝者がいるか、または引き分けで終了したか。
- 勝利が確定した場合、どのライン（縦、横、斜め）で揃ったか。
- 次の一手で勝利できるマス（リーチ）が、どちらのプレイヤーにとって存在するか。

## 2. ゲームの初期化
ゲーム開始時、システムは以下の状態になります。
- 盤面のすべてのマスは「空」の状態です。
- 最初の手番はプレイヤーOです。
- ゲームはプレイ中の状態です。

## 3. プレイヤーの操作と状態遷移
プレイヤーが盤面のいずれかのマスを選択すると、システムは以下の処理を行います。
1.  選択されたマスが「空」であり、かつゲームが決着していないことを確認します。
2.  条件を満たす場合、そのマスに現在の手番のプレイヤーの駒を配置します。
3.  配置後、盤面全体を評価し、以下の状態を更新します。
    - 勝者が決定したか。
    - すべてのマスが埋まり、引き分けとなったか。
    - 次のプレイヤーのリーチ状態。
4.  手番を相手プレイヤーに交代します。

## 4. 不正な操作への対応
プレイヤーが以下の操作を行った場合、システムはそれを無視し、ゲームの状態は一切変化しません。
- すでに駒が置かれているマスを選択する。
- ゲームが決着した後にマスを選択する。
