# ○×ゲーム システム動作仕様

## 1. ゲームの状態管理
システムは、ゲームを正しく進行させるために、以下の情報を常に記憶・管理します。

- **盤面の状態:** 3x3の各マスが、「○のマーク」、「×のマーク」、「空」のいずれであるか。
- **手番:** 現在、どちらのプレイヤー（○のプレイヤーか、×のプレイヤーか）の手番であるか。
- **ゲーム状況:** ゲームが「プレイ中」、「勝利」、「引き分け」のいずれの状態にあるか。
- **勝利ライン:** 勝利が確定した場合、どの縦・横・斜めのラインでマークが揃ったか。

## 2. ゲームの初期化
ゲームが開始される（またはリセットされる）際、システムは状態を以下のように設定します。

- **盤面の状態:** すべてのマスを「空」にします。
- **手番:** 「○」のプレイヤーを最初の手番に設定します。
- **ゲーム状況:** 「プレイ中」に設定します。

## 3. プレイヤーの操作と状態遷移
プレイヤーが盤上のマスを1つ選択した際、システムは以下の手順で処理を実行します。

1.  **操作の検証:**
    -   ゲーム状況が「プレイ中」であるかを確認します。
    -   選択されたマスが「空」であるかを確認します。
    -   上記の条件が満たされない場合、以降の処理は行いません。

2.  **盤面の更新:**
    -   検証を通過した場合、選択されたマスに、現在の手番プレイヤーのマーク（○または×）を配置します。

3.  **ゲーム状況の判定:**
    -   マークの配置後、盤面全体を評価し、ゲーム状況を更新します。
    -   **勝利判定:** 配置したマークによって、いずれかのプレイヤーが縦・横・斜めのいずれかで3つのマークを揃えたか判定します。揃った場合、ゲーム状況を「勝利」とし、勝利したプレイヤーと揃ったラインを記録します。
    -   **引き分け判定:** 勝利が確定せず、かつ盤上のすべてのマスが埋まった場合、ゲーム状況を「引き分け」とします。

4.  **手番の交代:**
    -   ゲーム状況が「プレイ中」のままである場合、手番を相手プレイヤーに交代します。

## 4. 不正な操作への対応
プレイヤーがルール上許可されていない操作を行った場合、システムはその操作を無視し、ゲームの状態は一切変更されません。

- **対象となる操作:**
  -   すでにマークが置かれているマスを選択する。
  -   ゲームが既に終了（勝利または引き分け）した後にマスを選択する。

---

## 本資料で定義すべきこと
- 本仕様書に記載されている内容は、現在の実装と一致しており、現時点で追加で定義すべき主要な項目はありません。
