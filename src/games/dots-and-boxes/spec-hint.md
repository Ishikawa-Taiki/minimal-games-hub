# ドット＆ボックス ヒント機能仕様

本ドキュメントは、「ドット＆ボックス」ゲームにおける「おしえて！」機能（ヒント機能）の仕様を定義します。これらの機能は、プレイヤーが「おしえて！」設定をオンにしている場合にのみ有効になります。

## 1. 各マスの残りのライン数表示

-   **ヒントID (ID):** `remaining-lines-count`
-   **説明 (Description):**
    未獲得の各ボックス（マス）内に、そのボックスを完成させるために必要な残りのライン数（4, 3, 2, 1のいずれか）を薄い数字で表示します。これにより、どのボックスが完成に近いか、あるいはどのボックスを相手に与えると危険かを一目で把握できます。
-   **表示仕様 (Display Specification):**
    -   数字は各ボックスの中央に、背景に溶け込むような薄い色（「◯×ゲーム」の`potential-lines`の色を参考）で表示されます。
    -   ボックスがプレイヤーによって獲得されると、この数字は表示されなくなります。
    -   このヒントは、「おしえて！」機能がオンの間、常に表示されます。

## 2. プレビュー機能

-   **ヒントID (ID):** `preview-move`
-   **説明 (Description):**
    まだ引かれていないラインを1回選択すると、その手でゲームがどのように進むかをプレビュー表示します。もう一度同じラインを選択することで、手を確定できます。これにより、うっかりミスを防ぎ、特に複数のボックスを一度に獲得できる場面での戦略を立てやすくなります。
-   **表示仕様 (Display Specification):**
    -   プレイヤーがまだ引かれていないラインを1回選択すると、そのラインはUI補助機能のハイライト（薄い白色）とは異なる、特別なプレビュー状態であることを示します。
    -   同時に、そのラインを引くことで完成するボックスがあれば、そのボックスが薄いプレイヤーの色（「◯×ゲーム」の`reach-squares`の色を参考）でハイライトされます。
    -   プレビューによってハイライトされたボックス内の「残りライン数」の数字も、同じプレビュー用の色に変化します。例えば、残り「1」のボックスがプレビューされると、その「1」の数字がプレイヤーのプレビュー色に変わります。
    -   プレビューの影響を受けない他のボックス内の数字は、ヒント1 `remaining-lines-count` の色のまま変化しません。
    -   プレイヤーが別の選択可能なラインを選択すると、プレビュー対象がそちらに切り替わります。
    -   同じプレビュー中のラインを再度選択すると、その手は確定され、通常のゲーム進行（ラインがプレイヤーの色で描画され、ボックスが獲得される）に戻ります。