# 表示仕様書: ドット＆ボックス

本ドキュメントは、「ドット＆ボックス」ゲームの表示に関する仕様を定義します。

## 1. 共通カラーパレット

色の定義は、既存のゲーム（特に「◯×ゲーム」「神経衰弱」）のカラースキームを踏襲し、プロジェクト全体で統一感を保ちます。

-   **プレイヤー1 (赤):**
    -   ラインの色: `colors.red[500]`
    -   ボックスの塗りつぶし色: `colors.red[200]` に透明度 `0.5` を適用
-   **プレイヤー2 (青):**
    -   ラインの色: `colors.blue[500]`
    -   ボックスの塗りつぶし色: `colors.blue[200]` に透明度 `0.5` を適用
-   **デフォルトライン:**
    -   色: `colors.gray[300]`
-   **選択可能なライン (ホバー時):**
    -   色: `colors.gray[100]`
-   **ヒント1 (残ライン数):**
    -   色: `colors.gray[400]` (「◯×ゲーム」の`potential-lines`の色を参考)
-   **ヒント2 (プレビュー):**
    -   獲得されるマスのハイライト色: `colors.red[100]` (プレイヤー1) / `colors.blue[100]` (プレイヤー2) (「◯×ゲーム」の`reach-squares`の色を参考)
    -   変化する残ライン数の色: `colors.red[300]` (プレイヤー1) / `colors.blue[300]` (プレイヤー2)

## 2. 難易度選択画面

ゲーム開始時には、プレイヤーに難易度を選択させる画面を表示します。
このレイアウトと機能は「神経衰弱」の難易度選択画面を踏襲します。

-   **タイトル:** 「むずかしさをえらんでね」
-   **選択肢:**
    -   **かんたん:** 3x3ドット (2x2マス)
    -   **ふつう:** 5x5ドット (4x4マス)
    -   **むずかしい:** 7x7ドット (6x6マス)
-   **レイアウト:** 各選択肢がボタンとして中央に縦に並びます。

## 3. ゲーム画面レイアウト

ゲーム画面は、共通コンポーネント `GameLayout` を使用して構築します。
レイアウトは「リバーシ」や「はさみしょうぎ」を参考に、中央にゲームボード、その周囲にステータス情報を配置します。

-   **ヘッダー:** `GameLayout`により、ゲームタイトル、ルールへのリンク、ホームに戻るボタンが配置されます。
-   **ステータス表示 (`GameStateDisplay`):**
    -   **PC:** サイドバーの上部に「「プレイヤー1」のばん」「プレイヤー1のかち」などの現在の状況を表示します。
    -   **モバイル:** 画面上部のスリムヘッダーに表示します。
-   **スコア表示:**
    -   **PC:** サイドバーに各プレイヤーが獲得したボックスの数を表示します。タイトルは「かくとくすう」とします。
    -   **モバイル:** ボトムシート内に表示します。
    -   例:
        -   プレイヤー1: 3
        -   プレイヤー2: 1
-   **ゲームボード:**
    -   画面の中央に配置されます。
    -   ドットとライン、ボックスで構成されます。

## 4. ゲームボードの表示

-   **ドット:** 小さな円としてグリッド状に配置されます。
-   **ライン:**
    -   全てのラインは、初期状態で薄いグレー(`colors.gray[300]`)で表示されます。
    -   プレイヤーがカーソルを合わせた（ホバーした）選択可能なラインは、薄い白色(`colors.gray[100]`)でハイライトされます。
    -   プレイヤーによって引かれたラインは、各プレイヤーの色（赤または青）で表示されます。
-   **ボックス:**
    -   プレイヤーがボックスを完成させると、そのプレイヤーの色で半透明に塗りつぶされます。

## 5. ヒント機能の表示（「おしえて！」ONの場合）

### 5.1. 各マスの残りのライン数表示

-   まだどちらのプレイヤーにも獲得されていない各ボックス（マス）の中央に、そのボックスを完成させるために必要な残りのライン数を、薄い灰色の数字(`colors.gray[400]`)で表示します (例: 4, 3, 2, 1)。
-   ボックスが獲得されたら、この数字は表示されなくなります。

### 5.2. プレビュー機能

-   プレイヤーが選択可能なラインをクリック（1回目）した際に、以下のプレビュー表示を行います。
    -   **獲得予定マスのハイライト:** そのラインを引くことで完成するボックスがあれば、そのボックスを各プレイヤーのプレビュー色（薄い赤/青）でハイライトします。
    -   **残ライン数の事前表示:**
        -   そのラインを引くことで、隣接するマスの「残りのライン数」が変化する場合、その数字を各プレイヤーのプレビュー色（薄い赤/青）で表示します。
        -   変化しないマスの数字は、元の薄い灰色のままです。

## 6. 勝敗結果ダイアログ

ゲーム終了時には、結果を表示するモーダルダイアログが表示されます。
このダイアログは「神経衰弱」のものを踏襲します。

-   **タイトル:**
    -   勝利時: 「あなたの勝ち！」
    -   敗北時: 「あなたの負け...」
    -   引き分け時: 「ひきわけ」
-   **内容:**
    -   最終的な獲得ボックス数を表示します。(例: 「あなた: 5こ」「あいて: 4こ」)
-   **ボタン:**
    -   「もう一回遊ぶ」: 同じ難易度でゲームをリセットして再開します。
    -   「トップに戻る」: トップページに戻ります。